(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e90f400","chunk-587796fa"],{"0fbe":function(t,e,s){"use strict";s("635f")},"19c7":function(t,e,s){"use strict";s("e6c1")},"24d4":function(t,e,s){},"267e":function(t,e,s){},"292a":function(t,e,s){"use strict";s("74a3")},"2eb7":function(t,e,s){},"320d":function(t,e,s){},"3e29":function(t,e,s){"use strict";s("d788")},4200:function(t,e,s){"use strict";var i=s("1f04"),n=s("4f06"),o=s("b7d9"),a=s("d714"),r=[].join,c=n!=Object,l=a("join",",");i({target:"Array",proto:!0,forced:c||!l},{join:function(t){return r.call(o(this),void 0===t?",":t)}})},"4bc7":function(t,e,s){"use strict";s("8655")},"4fd4":function(t,e,s){},5158:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-reader"},[s("div",{attrs:{id:"read"}}),s("div",{staticClass:"ebook-reader-mask",on:{click:t.onMaskClick,touchmove:t.move,touchend:t.moveEnd,touchstart:t.moveStart,mousedown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.onMouseEnter(e)},mousemove:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.onMouseMove(e)},mouseup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])||"button"in e&&0!==e.button?null:t.onMouseEnd(e)}}})])},n=[],o=(s("5b12"),s("9b5f"),s("4200"),s("e3b5"),s("3bae"),s("27ae"),s("591f"),s("feb3"),s("1d43"),s("ac0d")),a=s("7294"),r=s("e8ec"),c=s("5de6"),l=s("101f"),u={mixins:[o["a"]],methods:{onMouseEnter:function(t){this.mouseState=1,this.mouseStartTime=t.timeStamp,t.preventDefault(),t.stopPropagation()},onMouseMove:function(t){if(1===this.mouseState)this.mouseState=2;else if(2===this.mouseState){var e=0;this.firstOffsetY?(e=t.pageY-this.firstOffsetY,this.setOffsetY(e)):this.firstOffsetY=t.pageY}t.preventDefault(),t.stopPropagation()},onMouseEnd:function(t){var e=t.timeStamp-this.mouseStartTime;e<200&&(this.mouseState=4),2===this.mouseState?(this.setOffsetY(0),this.firstOffsetY=null,this.mouseState=3):this.mouseState=4,t.preventDefault(),t.stopPropagation()},move:function(t){var e=0;this.firstOffsetY?(e=t.changedTouches[0].pageY-this.firstOffsetY,this.setOffsetY(e)):this.firstOffsetY=t.changedTouches[0].pageY,event.preventDefault(),event.stopPropagation()},moveStart:function(t){},moveEnd:function(t){this.setOffsetY(0),this.firstOffsetY=0},getEbookName:function(){var t=this,e=this.$route.params.fileName.split("|"),s=e[1];Object(l["b"])(s,(function(s,i){!s&&i?t.setFileName(e.join("/")).then((function(){t.initEpub(i)})):t.setFileName(e.join("/")).then((function(){var e="http://42.193.126.226:7000/epub/"+t.fileName+".epub";t.initEpub(e)}))}))},parseBook:function(){var t=this;this.book.loaded.cover.then((function(e){t.book.archive.createUrl(e).then((function(e){t.setCover(e)}))})),this.book.loaded.metadata.then((function(e){t.setMetadata(e)})),this.book.loaded.navigation.then((function(e){var s=Object(c["d"])(e.toc);function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.parent?i(s.filter((function(e){return e.id===t.parent}))[0],++e):e}s.forEach((function(t){t.level=i(t)})),t.setNavigation(s)}))},initEpub:function(t){var e=this;this.book=new a["a"](t),this.setCurrentBook(this.book),this.parseBook(),this.rendition=this.book.renderTo("read",{width:innerWidth,height:innerHeight,method:"default"}),this.rendition.display().then((function(){e.beforeBookMounted()})),this.rendition.hooks.content.register((function(t){Promise.all([t.addStylesheet("".concat("http://42.193.126.226:7000","/fonts/daysOne.css")),t.addStylesheet("".concat("http://42.193.126.226:7000","/fonts/droidSans.css")),t.addStylesheet("".concat("http://42.193.126.226:7000","/fonts/tangerine.css")),t.addStylesheet("".concat("http://42.193.126.226:7000","/fonts/qiYi.css")),t.addStylesheet("".concat("http://42.193.126.226:7000","/fonts/webfont.css")),t.addStylesheet("".concat("http://42.193.126.226:7000","/fonts/chBold.css"))]).then((function(){}))})),this.book.ready.then((function(){return e.book.locations.generate(window.innerWidth/375*750*(e.defaultFontSize/16))})).then((function(t){e.setBookAvailable(!0),e.refreshLocation()}))},prevPage:function(){var t=this;this.rendition&&this.rendition.prev().then((function(){t.refreshLocation()}))},nextPage:function(){var t=this;this.rendition&&this.rendition.next().then((function(){t.refreshLocation()}))},beforeBookMounted:function(){var t=this;this.themeList.forEach((function(e){t.rendition.themes.register(e.name,e.style)})),this.rendition.themes.select(this.defaultTheme);var e=Object(r["c"])(this.fileName,"defaultFontSize");e&&(this.setDefaultFontSize(e),this.rendition.themes.fontSize(this.defaultFontSize+"px"));var s=Object(r["c"])(this.fileName,"defaultFontFamily");s&&(this.setDefaultFontFamily(s),this.rendition.themes.font(this.defaultFontFamily));var i=Object(r["c"])(this.fileName,"defaultTheme");i&&(this.setDefaultTheme(i),this.rendition.themes.select(this.defaultTheme)),this.initClobalStyle();var n=Object(r["h"])(this.fileName);n&&this.currentBook.rendition.display(n).then((function(){t.refreshLocation()}))},onMaskClick:function(t){if(!this.mouseState||2!==this.mouseState&&3!==this.mouseState){var e=t.offsetX,s=window.innerWidth;e>0&&e<.3*s?(this.prevPage(),this.toggleTitleAndMenu()):e>0&&e>.7*s?(this.nextPage(),this.toggleTitleAndMenu()):this.showOrHideMenu()}}},mounted:function(){this.getEbookName()}},h=u,f=(s("cf48"),s("5d22")),d=Object(f["a"])(h,i,n,!1,null,"1b04c1e6",null);e["default"]=d.exports},"51a1":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"ebook",staticClass:"ebook"},[s("ebook-title"),s("ebook-reader"),s("ebook-menu"),s("ebook-book-mark"),s("ebook-header"),s("ebook-footer")],1)},n=[],o=s("5158"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-down"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"title-wrapper"},[s("div",{staticClass:"left",on:{click:t.back}},[s("span",{staticClass:"icon-zuo"})]),s("div",{staticClass:"right"},[s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-shucheng"})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-qicheqianlian-select"})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-gengduo"})])])])])},r=[],c=s("ac0d"),l={mixins:[c["a"]],methods:{back:function(){this.$router.go(-1)}}},u=l,h=(s("6840"),s("5d22")),f=Object(h["a"])(u,a,r,!1,null,"55fa7ea0",null),d=f.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible,expression:"menuVisible"}],staticClass:"menu-wrapper",class:{"hide-box-shadow":!t.menuVisible||t.settingVisible>=0}},[s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-gengduo_1",on:{click:function(e){return t.showSetting(3)}}})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-jindu",on:{click:function(e){return t.showSetting(2)}}})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-taiyang",on:{click:function(e){return t.showSetting(1)}}})]),s("div",{staticClass:"icon-wrapper"},[s("span",{staticClass:"icon-A",on:{click:function(e){return t.showSetting(0)}}})])])]),s("ebook-setting-font"),s("ebook-select-font"),s("ebook-setting-theme"),s("ebook-setting-progress"),s("ebook-slide")],1)},p=[],b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&0===t.settingVisible,expression:"menuVisible && settingVisible === 0"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"setting-font-size"},[s("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[0].fontSize+"px"}},[t._v("A")]),s("div",{staticClass:"select"},t._l(t.fontSizeList,(function(e,i){return s("div",{key:i,staticClass:"select-wrapper",on:{click:function(s){return t.setFontSize(e.fontSize)}}},[s("div",{staticClass:"line"}),s("div",{staticClass:"point-wrapper"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.defaultFontSize===e.fontSize,expression:"defaultFontSize === item.fontSize"}],staticClass:"point"},[s("div",{staticClass:"small-point"})])]),s("div",{staticClass:"line"})])})),0),s("div",{staticClass:"preview",style:{fontSize:t.fontSizeList[t.fontSizeList.length-1].fontSize+"px"}},[t._v("A")])]),s("div",{staticClass:"setting-font-family",on:{click:t.showFontFamilyPopup}},[s("div",{staticClass:"setting-font-family-text-wrapper"},[s("span",{staticClass:"setting-font-family-text"},[t._v(t._s(t.defaultFontFamily))])]),s("div",{staticClass:"setting-font-family-icon-wrapper"},[s("span",{staticClass:"icon-zuo1"})])])])])},v=[],k=s("5de6"),g=s("e8ec"),C={mixins:[c["a"]],data:function(){return{fontSizeList:k["b"]}},methods:{setFontSize:function(t){this.setDefaultFontSize(t),this.currentBook.rendition.themes.fontSize(t+"px"),Object(g["r"])(this.fileName,"defaultFontSize",this.defaultFontSize)},showFontFamilyPopup:function(){this.setFontFamilyVisible(!this.fontFamilyVisible)}}},y=C,w=(s("6b4a"),Object(h["a"])(y,b,v,!1,null,"041b3492",null)),x=w.exports,S=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.fontFamilyVisible,expression:"fontFamilyVisible"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"select-font-menu-warpper"},[s("div",{staticClass:"icon",on:{click:function(e){return t.showFontFamily()}}},[s("div",{staticClass:"icon-zuo2"})]),s("div",{staticClass:"select-font-text"},[s("span",[t._v(t._s(t.$t("book.selectFont")))])])]),s("div",{staticClass:"select-font-list"},t._l(t.fontFamilyList,(function(e,i){return s("div",{key:i,staticClass:"select-font-list-item",on:{click:function(s){return t.setFontFamily(e.fontFamily)}}},[s("span",{staticClass:"item-fontFamily"},[t._v(t._s(e.fontFamily))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.defaultFontFamily===e.fontFamily,expression:"defaultFontFamily === item.fontFamily"}],staticClass:"icon-uniE90D"})])})),0)])])},_=[],F={mixins:[c["a"]],data:function(){return{fontFamilyList:k["a"]}},methods:{showFontFamily:function(){this.fontFamilyVisible&&this.setFontFamilyVisible(!this.fontFamilyVisible)},setFontFamily:function(t){this.setDefaultFontFamily(t),"Default"===this.defaultFontFamily?this.currentBook.rendition.themes.font("Times New Roman"):this.currentBook.rendition.themes.font(t),Object(g["r"])(this.fileName,"defaultFontFamily",this.defaultFontFamily)}}},O=F,T=(s("d6b5"),Object(h["a"])(O,S,_,!1,null,"d73e9e1c",null)),j=T.exports,$=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&1===t.settingVisible,expression:"menuVisible && settingVisible === 1"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"setting-theme"},t._l(t.themeList,(function(e,i){return s("div",{key:i,staticClass:"setting-theme-item",on:{click:function(e){return t.setTheme(i)}}},[s("div",{staticClass:"preview",class:{selected:e.name===t.defaultTheme},style:{background:e.style.body.background}}),s("div",{staticClass:"text",class:{selected:e.name===t.defaultTheme}},[t._v(t._s(e.alias))])])})),0)])])},E=[],N=(s("1d43"),{mixins:[c["a"]],methods:{setTheme:function(t){var e=this,s=this.themeList[t];this.setDefaultTheme(s.name).then((function(){e.currentBook.rendition.themes.register(s.name,s.style),e.currentBook.rendition.themes.select(e.defaultTheme),e.initClobalStyle()})),Object(g["r"])(this.fileName,"defaultTheme",this.defaultTheme)}}}),V=N,B=(s("c0e8"),Object(h["a"])(V,$,E,!1,null,"764ead1d",null)),P=B.exports,z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"slide-up"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.menuVisible&&2===t.settingVisible,expression:"menuVisible && settingVisible === 2"}],staticClass:"setting-wrapper"},[s("div",{staticClass:"setting-progress"},[s("div",{staticClass:"read-time-wrapper"},[s("span",{staticClass:"read-time-text"},[t._v(t._s(t.getReadTimeText(t.fileName)))]),s("span",{staticClass:"icon-zuo1"})]),s("div",{staticClass:"progress-wrapper"},[s("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.prevSection()}}},[s("span",{staticClass:"icon-zuo"})]),s("input",{ref:"progress",staticClass:"progress",attrs:{type:"range",max:"100",min:"0",step:"1",disabled:!t.bookAvailable},domProps:{value:t.progress},on:{change:function(e){return t.onProgressChange(e.target.value)},input:function(e){return t.onProgressInput(e.target.value)}}}),s("div",{staticClass:"progress-icon-wrapper",on:{click:function(e){return t.nextSection()}}},[s("span",{staticClass:"icon-zuo1"})])]),s("div",{staticClass:"text-wrapper"},[s("span",{staticClass:"progress-section-text"},[t._v(t._s(t.getSectionName))]),s("span",[t._v("("+t._s(t.bookAvailable?t.progress+"%":"加载中...")+")")])])])])])},L=[],M={mixins:[c["a"]],methods:{onProgressChange:function(t){var e=this;this.setProgress(t).then((function(){e.displayProgress(),e.upDateProgressBg()}))},onProgressInput:function(t){var e=this;this.setProgress(t).then((function(){e.displayProgress(),e.upDateProgressBg()}))},displayProgress:function(){var t=this.currentBook.locations.cfiFromPercentage(this.progress/100);this.display(t)},upDateProgressBg:function(){this.$refs.progress.style.backgroundSize="".concat(this.progress,"% 100%")},displaySection:function(){var t=this.currentBook.section(this.section);t&&t.href&&this.display(t.href)},prevSection:function(){var t=this;this.section>0&&this.bookAvailable&&this.setSection(this.section-1).then((function(){t.displaySection()}))},nextSection:function(){var t=this;this.currentBook.spine.length-1&&this.bookAvailable&&this.setSection(this.section+1).then((function(){t.displaySection()}))}},updated:function(){this.upDateProgressBg()}},D=M,A=(s("4bc7"),Object(h["a"])(D,z,L,!1,null,"1505398a",null)),Y=A.exports,W=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:3===t.settingVisible,expression:"settingVisible === 3"}],staticClass:"slide-content-wrapper"},[s("transition",{attrs:{name:"slide-right"}},[3===t.settingVisible?s("div",{staticClass:"content"},[t.bookAvailable?s("div",{staticClass:"content-page-wrapper"},[s("div",{staticClass:"content-page"},[s(0===t.currentTab?t.content:t.bookmark,{tag:"component"})],1),s("div",{staticClass:"content-page-tab"},[s("div",{staticClass:"content-page-tab-item",class:{selected:0===t.currentTab},on:{click:function(e){return t.changeCurrentTab(0)}}},[t._v(" "+t._s(t.$t("book.navigation"))+" ")]),s("div",{staticClass:"content-page-tab-item",class:{selected:1===t.currentTab},on:{click:function(e){return t.changeCurrentTab(1)}}},[t._v(" "+t._s(t.$t("book.bookmark"))+" ")])])]):s("div",{staticClass:"content-empty"},[s("ebook-loading")],1)]):t._e()]),s("div",{staticClass:"content-bg",on:{click:function(e){return t.hide()}}})],1)])},I=[],R=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-slide-contents"},[s("div",{staticClass:"slide-contents-search-wrapper"},[s("div",{staticClass:"slide-contents-search-input-wrapper"},[t._m(0),s("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"slide-contents-search-input",attrs:{type:"text",placeholder:t.$t("book.searchHint")},domProps:{value:t.searchText},on:{click:function(e){return t.showSearchPage()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.search()},input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),t.searchVisible?s("div",{staticClass:"slide-contents-search-cancel",on:{click:function(e){return t.hideSearchPage()}}},[t._v("取消")]):t._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.searchVisible,expression:"!searchVisible"}],staticClass:"slide-contents-book-wrapper"},[s("div",{staticClass:"slid-contents-book-img-wrapper"},[s("img",{staticClass:"slid-contents-book-img",attrs:{src:t.cover,alt:""}})]),s("div",{staticClass:"slide-contents-book-info-wrapper"},[s("div",{staticClass:"slide-contents-book-title"},[s("span",{staticClass:"slide-contents-book-title-text"},[t._v(t._s(t.metadata.title))])]),s("div",{staticClass:"slide-contents-book-author"},[s("span",{staticClass:"slide-contents-book-author-text"},[t._v(t._s(t.metadata.creator))])])]),s("div",{staticClass:"slide-contents-book-progress-wrapper"},[s("div",{staticClass:"slide-contents-book-progress"},[s("span",{staticClass:"progress-text"},[t._v(t._s(t.$t("book.haveRead2")))]),s("span",{staticClass:"progress"},[t._v(t._s(t.progress+"%"))])]),s("div",{staticClass:"slide-contents-book-time"},[t._v(t._s(t.getReadTimeText(t.fileName)))])])]),s("scroll",{directives:[{name:"show",rawName:"v-show",value:!t.searchVisible,expression:"!searchVisible"}],ref:"scroll",staticClass:"slide-contents-list",attrs:{top:156,bottom:48}},t._l(t.navigation,(function(e,i){return s("div",{key:i,staticClass:"slidee-contents-item"},[s("span",{staticClass:"slide-contents-item-label",class:{selected:t.section===i},style:t.contentItemStyle(e),on:{click:function(s){return t.displayContent(e.href)}}},[t._v(t._s(e.label))]),s("span",{staticClass:"slide-contents-item-page"})])})),0),s("scroll",{directives:[{name:"show",rawName:"v-show",value:t.searchVisible,expression:"searchVisible"}],staticClass:"slide-search-list",attrs:{top:66,bottom:48}},t._l(t.searchList,(function(e,i){return s("div",{key:i,staticClass:"slide-search-item",domProps:{innerHTML:t._s(e.excerpt)},on:{click:function(s){return t.displayContent(e.cfi,!0)}}})})),0)],1)},H=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"slide-contents-search-icon"},[s("span",{staticClass:"icon-search"})])}],K=(s("3337"),s("fc13"),s("9b5f"),s("27ae"),s("591f"),s("feb3"),s("4cd5"),s("16ca"),s("6701")),q=s("fa7d"),J={mixins:[c["a"]],components:{Scroll:K["a"]},data:function(){return{searchVisible:!1,searchList:null,searchText:""}},methods:{search:function(){var t=this;this.searchText&&this.searchText.length>0&&this.doSearch(this.searchText).then((function(e){t.searchList=e,t.searchList.map((function(e){return e.excerpt=e.excerpt=e.excerpt.replace(t.searchText,'<span class="content-search-text">'.concat(t.searchText,"</span>")),e}))}))},doSearch:function(t){var e=this;return Promise.all(this.currentBook.spine.spineItems.map((function(s){return s.load(e.currentBook.load.bind(e.currentBook)).then(s.find.bind(s,t)).finally(s.unload.bind(s))}))).then((function(t){return Promise.resolve([].concat.apply([],t))}))},displayContent:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.display(t,(function(){e.showOrHideMenu(),s&&e.currentBook.rendition.annotations.highlight(t)}))},contentItemStyle:function(t){return{marginLeft:"".concat(Object(q["a"])(15*t.level),"rem")}},showSearchPage:function(){this.searchVisible=!0},hideSearchPage:function(){this.searchText="",this.searchVisible=!1,this.searchList=null}}},U=J,X=(s("0fbe"),Object(h["a"])(U,R,H,!1,null,"089f419d",null)),G=X.exports,Q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-slide-bookmark"},[s("div",{staticClass:"slide-bookmark-title"},[t._v(t._s(t.$t("book.bookmark"))+" "+t._s(t.bookmark?t.bookmark.length:0))]),s("scroll",{staticClass:"slide-bookmark-list"},t._l(t.bookmark,(function(e,i){return s("div",{key:i,staticClass:"slide-bookmark-item",on:{click:function(s){return t.displayBookmark(e.cfi)}}},[s("div",{staticClass:"slide-bookmark-item-icon"},[s("div",{staticClass:"icon-1"})]),s("div",{staticClass:"slide-bookmark-item-text"},[t._v(t._s(e.text))])])})),0)],1)},Z=[],tt={mixins:[c["a"]],components:{Scroll:K["a"]},data:function(){return{bookmark:null}},methods:{displayBookmark:function(t){var e=this;this.display(t,(function(){e.showOrHideMenu()}))}},mounted:function(){this.bookmark=Object(g["e"])(this.fileName)}},et=tt,st=(s("e545"),Object(h["a"])(et,Q,Z,!1,null,"2ffa3ad0",null)),it=st.exports,nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-loading"},[s("div",{staticClass:"ebook-loading-wrapper"},[t._l(t.data,(function(e,i){return s("div",{key:i,staticClass:"ebook-loading-item"},t._l(e,(function(t,e){return s("div",{key:e,staticClass:"ebook-loading-line-wrapper"},[s("div",{ref:"line",refInFor:!0,staticClass:"ebook-loading-line"}),s("div",{ref:"mask",refInFor:!0,staticClass:"ebook-loading-mask"})])})),0)})),s("div",{staticClass:"ebook-loading-center"})],2)])},ot=[],at=(s("3bae"),{data:function(){return{data:[[{},{},{}],[{},{},{}]],maskWidth:[{value:0},{value:0},{value:0},{value:0},{value:0},{value:0}],lineWidth:[{value:16},{value:16},{value:16},{value:16},{value:16},{value:16}],add:!0,end:!1}},mounted:function(){var t=this;this.task=setInterval((function(){t.$refs.mask.forEach((function(e,s){var i=t.$refs.mask[s],n=t.$refs.line[s],o=t.maskWidth[s],a=t.lineWidth[s];if(0===s)t.add&&o.value<16?(o.value++,a.value--):!t.add&&a.value<16&&(o.value--,a.value++);else if(t.add&&o.value<16){var r=t.maskWidth[s-1];r.value>=8&&(o.value++,a.value--)}else if(!t.add&&a.value<16){var c=t.lineWidth[s-1];c.value>=8&&(o.value--,a.value++)}i.style.width="".concat(Object(q["a"])(o.value),"rem"),i.style.flex="0 0 ".concat(Object(q["a"])(o.value),"rem"),n.style.width="".concat(Object(q["a"])(a.value),"rem"),n.style.flex="0 0 ".concat(Object(q["a"])(a.value),"rem"),s===t.maskWidth.length-1&&(t.add?16===o.value&&(t.end=!0):0===o.value&&(t.end=!0)),t.end&&(t.add=!t.add,t.end=!1)}))}),20)},beforeDestroy:function(){this.task&&clearInterval(this.task)}}),rt=at,ct=(s("3e29"),Object(h["a"])(rt,nt,ot,!1,null,"24ab5762",null)),lt=ct.exports,ut={mixins:[c["a"]],components:{EbookLoading:lt},data:function(){return{currentTab:0,content:G,bookmark:it}},methods:{hide:function(){this.showOrHideMenu()},changeCurrentTab:function(t){this.currentTab=t}}},ht=ut,ft=(s("8f4d"),Object(h["a"])(ht,W,I,!1,null,"3eaec47b",null)),dt=ft.exports,mt={components:{EbookSettingFont:x,EbookSelectFont:j,EbookSettingTheme:P,EbookSettingProgress:Y,EbookSlide:dt},mixins:[c["a"]],methods:{showSetting:function(t){this.settingVisible===t?this.setSettingVisible(-1):this.setSettingVisible(t)}}},pt=mt,bt=(s("19c7"),Object(h["a"])(pt,m,p,!1,null,"6bc7fdcc",null)),vt=bt.exports,kt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"bookmark",staticClass:"ebook-bookmark"},[s("div",{staticClass:"ebook-bookmark-text-wrapper"},[s("div",{ref:"iconDown",staticClass:"ebook-bookmark-down-wrapper"},[s("span",{staticClass:"icon-uniE911"})]),s("div",{staticClass:"ebook-bookmark-text"},[t._v(t._s(t.text))])]),s("div",{staticClass:"ebook-bookmark-icon-wrapper",style:t.isFixed?t.fixedStyle:{}},[s("bookmark",{attrs:{color:t.color,height:35,width:20}})],1)])},gt=[],Ct=(s("d447"),s("e3b5"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"bookmark",staticClass:"bookmark",style:t.style})}),yt=[],wt=(s("24a8"),{props:{width:Number,height:Number,color:String},computed:{style:function(){return this.color?{borderColor:"".concat(this.color," ").concat(this.color," transparent ").concat(this.color)}:{}}},methods:{refresh:function(){this.height&&this.width&&(this.$refs.bookmark.style.borderWidth="".concat(Object(q["a"])(this.height-5),"rem ").concat(Object(q["a"])(this.width/2),"rem ").concat(Object(q["a"])(5),"rem ").concat(Object(q["a"])(this.width/2),"rem"))}},mounted:function(){this.refresh()}}),xt=wt,St=(s("deb3"),Object(h["a"])(xt,Ct,yt,!1,null,"07a669b5",null)),_t=St.exports,Ft="#346cbc",Ot="#fff",Tt={mixins:[c["a"]],components:{Bookmark:_t},computed:{height:function(){return Object(q["b"])(35)},threshold:function(){return Object(q["b"])(55)},fixedStyle:function(){return{position:"fixed",top:0,right:"".concat((window.innerWidth-this.$refs.bookmark.clientWidth)/2,"px")}}},watch:{offsetY:function(t){!this.bookAvailable||this.menuVisible||this.settingVisible>=0||(t>=this.height&&t<this.threshold?this.beforeThreshold(t):t>=this.threshold?this.afterThreshold(t):t>0&&t<this.height?this.beforeHeight():0===t&&this.restore())},isBookmark:function(t){this.isFixed=t,this.color=t?Ft:Ot}},data:function(){return{text:"",color:Ot,isFixed:!1}},methods:{addBookmark:function(){var t=this;this.bookmark=Object(g["e"])(this.fileName),this.bookmark||(this.bookmark=[]);var e=this.currentBook.rendition.currentLocation(),s=e.start.cfi.replace(/!.*/,""),i=e.start.cfi.replace(/.*!/,"").replace(/\)$/,""),n=e.end.cfi.replace(/.*!/,"").replace(/\)$/,""),o="".concat(s,"!,").concat(i,",").concat(n,")");this.currentBook.getRange(o).then((function(s){var i=s.toString().replace(/\s\s/g,"");t.bookmark.push({cfi:e.start.cfi,text:i}),Object(g["m"])(t.fileName,t.bookmark)}))},removeBookmark:function(){var t=this.currentBook.rendition.currentLocation(),e=t.start.cfi;this.bookmark=Object(g["e"])(this.fileName),this.bookmark&&(Object(g["m"])(this.fileName,this.bookmark.filter((function(t){return t.cfi!==e}))),this.setisBookmark(!1))},restore:function(){var t=this;setTimeout((function(){t.$refs.bookmark.style.top="".concat(-t.height,"px"),t.$refs.iconDown.style.transform=""}),200),this.isFixed?(this.setisBookmark(!0),this.addBookmark()):(this.setisBookmark(!1),this.removeBookmark())},beforeHeight:function(){this.isBookmark?(this.text=this.$t("book.pulldownDeleteMark"),this.color=Ft,this.isFixed=!0):(this.text=this.$t("book.pulldownAddMark"),this.color=Ot,this.isFixed=!1)},beforeThreshold:function(t){this.$refs.bookmark.style.top="".concat(-t,"px"),this.beforeHeight();var e=this.$refs.iconDown;"rotate(180deg)"===e.style.transform&&(e.style.transform="")},afterThreshold:function(t){this.$refs.bookmark.style.top="".concat(-t,"px"),this.isBookmark?(this.text=this.$t("book.releaseDeleteMark"),this.color=Ot,this.isFixed=!1):(this.text=this.$t("book.releaseAddMark"),this.color=Ft,this.isFixed=!0);var e=this.$refs.iconDown;""===e.style.transform&&(e.style.transform="rotate(180deg)")}}},jt=Tt,$t=(s("6b8d"),Object(h["a"])(jt,kt,gt,!1,null,"808a5100",null)),Et=$t.exports,Nt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-header"},[s("span",{staticClass:"ebook-header-text"},[t._v(t._s(t.getSectionName))])])},Vt=[],Bt={mixins:[c["a"]]},Pt=Bt,zt=(s("292a"),Object(h["a"])(Pt,Nt,Vt,!1,null,"4e63ca4b",null)),Lt=zt.exports,Mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ebook-footer"},[s("span",{staticClass:"ebook-footer-text"},[t._v(t._s(this.bookAvailable?this.progress+"%":"加载中"))])])},Dt=[],At={mixins:[c["a"]]},Yt=At,Wt=(s("7f4b"),Object(h["a"])(Yt,Mt,Dt,!1,null,"9aae59fc",null)),It=Wt.exports,Rt={mixins:[c["a"]],components:{ebookReader:o["default"],ebookTitle:d,ebookMenu:vt,ebookBookMark:Et,ebookHeader:Lt,ebookFooter:It},methods:{startLoopReadTime:function(){var t=this,e=Object(g["i"])(this.fileName);e||(e=0),this.task=setInterval((function(){e++,e%30===0&&Object(g["p"])(t.fileName,e)}),1e3)},move:function(t){this.$refs.ebook.style.top=t+"px"},restore:function(){var t=this;this.$refs.ebook.style.top="0px",this.$refs.ebook.style.transition="all .2s linear",setTimeout((function(){t.$refs.ebook.style.transition=""}),200)}},mounted:function(){this.startLoopReadTime()},beforeDestroy:function(){this.task&&clearInterval(this.task)},watch:{offsetY:function(t){!this.menuVisible&&this.bookAvailable&&(t>0?this.move(t):0===t&&this.restore())}}},Ht=Rt,Kt=(s("8ec1"),Object(h["a"])(Ht,i,n,!1,null,"55d4299c",null));e["default"]=Kt.exports},"5b12":function(t,e,s){"use strict";var i=s("9194"),n=s("d192"),o=s("baa9"),a=s("4023"),r=s("b418"),c=s("c11d"),l=s("a187"),u=s("1a58"),h=s("5a62"),f=s("7ce6"),d=[].push,m=Math.min,p=4294967295,b=!f((function(){return!RegExp(p,"y")}));i("split",2,(function(t,e,s){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,s){var i=String(a(this)),o=void 0===s?p:s>>>0;if(0===o)return[];if(void 0===t)return[i];if(!n(t))return e.call(i,t,o);var r,c,l,u=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),m=0,b=new RegExp(t.source,f+"g");while(r=h.call(b,i)){if(c=b.lastIndex,c>m&&(u.push(i.slice(m,r.index)),r.length>1&&r.index<i.length&&d.apply(u,r.slice(1)),l=r[0].length,m=c,u.length>=o))break;b.lastIndex===r.index&&b.lastIndex++}return m===i.length?!l&&b.test("")||u.push(""):u.push(i.slice(m)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(t,s){return void 0===t&&0===s?[]:e.call(this,t,s)}:e,[function(e,s){var n=a(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,n,s):i.call(String(n),e,s)},function(t,n){var a=s(i,t,this,n,i!==e);if(a.done)return a.value;var h=o(t),f=String(this),d=r(h,RegExp),v=h.unicode,k=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(b?"y":"g"),g=new d(b?h:"^(?:"+h.source+")",k),C=void 0===n?p:n>>>0;if(0===C)return[];if(0===f.length)return null===u(g,f)?[f]:[];var y=0,w=0,x=[];while(w<f.length){g.lastIndex=b?w:0;var S,_=u(g,b?f:f.slice(w));if(null===_||(S=m(l(g.lastIndex+(b?0:w)),f.length))===y)w=c(f,w,v);else{if(x.push(f.slice(y,w)),x.length===C)return x;for(var F=1;F<=_.length-1;F++)if(x.push(_[F]),x.length===C)return x;w=y=S}}return x.push(f.slice(y)),x}]}),!b)},"635f":function(t,e,s){},6509:function(t,e,s){"use strict";s("24d4")},6701:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"scrollWrapper",staticClass:"scroll-wrapper",class:{"no-scroll":t.ifNoScroll},on:{"&scroll":function(e){return t.handleScroll(e)}}},[t._t("default")],2)},n=[],o=(s("24a8"),s("fa7d")),a={props:{top:{type:Number,default:0},bottom:{type:Number,default:0},ifNoScroll:{type:Boolean,default:!1}},methods:{handleScroll:function(t){var e=t.target.scrollTop||window.pageYOffset||document.body.scrollTop;this.$emit("onScroll",e)},scrollTo:function(t,e){this.$refs.scrollWrapper.scrollTo(t,e)},refresh:function(){this.$refs.scrollWrapper&&(this.$refs.scrollWrapper.style.height=window.innerHeight-Object(o["b"])(this.top)-Object(o["b"])(this.bottom)+"px")}},mounted:function(){this.refresh()}},r=a,c=(s("6509"),s("5d22")),l=Object(c["a"])(r,i,n,!1,null,"cc99c854",null);e["a"]=l.exports},6840:function(t,e,s){"use strict";s("267e")},"68db":function(t,e,s){},"6b4a":function(t,e,s){"use strict";s("b355")},"6b8d":function(t,e,s){"use strict";s("68db")},"74a3":function(t,e,s){},"7f4b":function(t,e,s){"use strict";s("320d")},8655:function(t,e,s){},"8ec1":function(t,e,s){"use strict";s("b99a")},"8f4d":function(t,e,s){"use strict";s("2eb7")},a835:function(t,e,s){},b355:function(t,e,s){},b99a:function(t,e,s){},c0e8:function(t,e,s){"use strict";s("fce5")},cf48:function(t,e,s){"use strict";s("4fd4")},d192:function(t,e,s){var i=s("97f5"),n=s("36b2"),o=s("3086"),a=o("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==n(t))}},d447:function(t,e,s){"use strict";var i=s("bbee"),n=s("baa9"),o=s("7ce6"),a=s("2e38"),r="toString",c=RegExp.prototype,l=c[r],u=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=l.name!=r;(u||h)&&i(RegExp.prototype,r,(function(){var t=n(this),e=String(t.source),s=t.flags,i=String(void 0===s&&t instanceof RegExp&&!("flags"in c)?a.call(t):s);return"/"+e+"/"+i}),{unsafe:!0})},d6b5:function(t,e,s){"use strict";s("a835")},d788:function(t,e,s){},dcaf:function(t,e,s){},deb3:function(t,e,s){"use strict";s("f8ab")},e545:function(t,e,s){"use strict";s("dcaf")},e6c1:function(t,e,s){},f8ab:function(t,e,s){},fce5:function(t,e,s){}}]);
//# sourceMappingURL=chunk-0e90f400.c91c7a2c.js.map